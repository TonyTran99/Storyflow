<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StoryFlow 9 ‚Äì Kallaway Storytelling Coach (HTML)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="description" content="StoryFlow 9 ‚Äì Tr·ª£ l√Ω k·ªÉ chuy·ªán theo 9 chi·∫øn thu·∫≠t Kallaway" />
  <style>
    .prose ul { list-style: disc; padding-left: 1.25rem; }
    .fade-in { animation: fade .25s ease-in; }
    @keyframes fade { from {opacity: .0; transform: translateY(3px)} to {opacity:1; transform: translateY(0)} }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 text-slate-800">
  <!-- Header -->
  <header class="sticky top-0 z-10 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-slate-900 text-white grid place-items-center font-bold">SF</div>
        <div>
          <h1 class="text-lg md:text-xl font-semibold">StoryFlow 9</h1>
          <p class="text-xs text-slate-500 -mt-0.5">Tr·ª£ l√Ω k·ªÉ chuy·ªán ‚Äì 9 chi·∫øn thu·∫≠t v√†ng (Kallaway)</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="copyJsonBtn" class="px-3 py-1.5 rounded-lg bg-slate-900 text-white text-sm hover:opacity-90">Sao ch√©p JSON</button>
        <button id="resetBtn" class="px-3 py-1.5 rounded-lg border text-sm">Reset</button>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-8 space-y-8">
    <!-- Controls -->
    <section class="bg-white/80 backdrop-blur rounded-2xl shadow-sm border border-slate-200 p-5 md:p-6">
      <div class="flex items-start gap-3 mb-3">
        <div class="h-9 w-9 shrink-0 rounded-xl bg-slate-900 text-white flex items-center justify-center text-sm font-semibold">‚öôÔ∏è</div>
        <h2 class="text-xl md:text-2xl font-semibold text-slate-800 leading-tight">Thi·∫øt l·∫≠p nhanh</h2>
      </div>

      <div class="grid md:grid-cols-2 gap-5">
        <label class="block">
          <div class="text-sm font-medium text-slate-700 mb-1">Ch·ªß ƒë·ªÅ video</div>
          <input id="topic" class="w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-slate-300" placeholder="AI gi√∫p h·ªçc sinh ti·ªÉu h·ªçc h·ªçc To√°n nhanh h∆°n"/>
          <div class="text-xs text-slate-500 mt-1">V√≠ d·ª•: ‚ÄúAI gi√∫p h·ªçc sinh ti·ªÉu h·ªçc h·ªçc To√°n nhanh h∆°n‚Äù</div>
        </label>

        <label class="block">
          <div class="text-sm font-medium text-slate-700 mb-1">ƒê·ªëi t∆∞·ª£ng ch√≠nh</div>
          <select id="audience" class="w-full rounded-xl border border-slate-300 px-3 py-2">
            <option>Ph·ª• huynh c√≥ con c·∫•p 1</option>
            <option>Ng∆∞·ªùi m·ªõi h·ªçc AI</option>
            <option>Nh√† ƒë·∫ßu t∆∞ n·ªôi dung</option>
            <option>H·ªçc sinh THCS</option>
            <option>Ng∆∞·ªùi y√™u ph√°t tri·ªÉn b·∫£n th√¢n</option>
          </select>
        </label>

        <label class="block">
          <div class="text-sm font-medium text-slate-700 mb-1">M·ª•c ti√™u video</div>
          <input id="goal" class="w-full rounded-xl border border-slate-300 px-3 py-2" placeholder="gi√∫p kh√°n gi·∫£ √°p d·ª•ng ƒë∆∞·ª£c ngay"/>
        </label>

        <label class="block">
          <div class="text-sm font-medium text-slate-700 mb-1">N·ªÅn t·∫£ng / Th·ªùi l∆∞·ª£ng g·ª£i √Ω</div>
          <select id="platform" class="w-full rounded-xl border border-slate-300 px-3 py-2">
            <option value="yt">YouTube (8‚Äì12 ph√∫t)</option>
            <option value="shorts" selected>Shorts/Reels (45‚Äì60s)</option>
            <option value="tiktok">TikTok (60‚Äì120s)</option>
            <option value="pod">Podcast video (15‚Äì30p)</option>
          </select>
        </label>

        <label class="block">
          <div class="text-sm font-medium text-slate-700 mb-1">T√¥ng gi·ªçng</div>
          <select id="tone" class="w-full rounded-xl border border-slate-300 px-3 py-2">
            <option>·∫§m √°p</option>
            <option>D√≠ d·ªèm</option>
            <option>Tr·ª±c di·ªán</option>
            <option selected>Truy·ªÅn c·∫£m h·ª©ng</option>
            <option>H√†i h∆∞·ªõc</option>
            <option>K·ªãch t√≠nh</option>
          </select>
        </label>

        <label class="block">
          <div class="text-sm font-medium text-slate-700 mb-1">T√†i s·∫£n b·∫±ng ch·ª©ng (ph√¢n t√°ch b·∫±ng d·∫•u ph·∫©y)</div>
          <input id="proofAssets" class="w-full rounded-xl border border-slate-300 px-3 py-2" value="·∫¢nh tr∆∞·ªõc/sau, Feedback kh√°ch h√†ng, Bi·ªÉu ƒë·ªì k·∫øt qu·∫£"/>
          <div class="text-xs text-slate-500 mt-1">VD: ·∫¢nh tr∆∞·ªõc/sau, Feedback kh√°ch h√†ng, Bi·ªÉu ƒë·ªì k·∫øt qu·∫£, Video th·ª±c h√†nh</div>
        </label>
      </div>

      <div class="h-px bg-slate-200 my-6"></div>

      <div id="chips" class="flex flex-wrap gap-2 items-center text-sm"></div>

      <div class="mt-6">
        <button id="generateBtn" class="px-4 py-2 rounded-xl bg-slate-900 text-white text-sm hover:opacity-90">T·∫°o g·ª£i √Ω 9 chi·∫øn thu·∫≠t</button>
      </div>
    </section>

    <!-- Results -->
    <div id="results" class="space-y-6"></div>

    <footer class="text-center text-xs text-slate-500 pt-6 pb-12">StoryFlow 9 ‚Ä¢ Kallaway-inspired ‚Ä¢ HTML + Tailwind + Vanilla JS</footer>
  </main>

  <script>
    // --- Helpers ---
    const $ = (id) => document.getElementById(id);
    const platformSpecs = {
      yt:  { label: "YouTube (8‚Äì12 ph√∫t)", switchSec: 4 },
      shorts: { label: "Shorts/Reels (45‚Äì60s)", switchSec: 3 },
      tiktok: { label: "TikTok (60‚Äì120s)", switchSec: 3 },
      pod: { label: "Podcast video (15‚Äì30p)", switchSec: 6 },
    };

    function sentence(s) {
      const t = (s || "").trim();
      if (!t) return "";
      const last = t.slice(-1);
      return ".!?".includes(last) ? t : t + ".";
    }

    function makeChip(text) {
      const span = document.createElement("span");
      span.className = "inline-flex items-center rounded-full border border-slate-300 px-2.5 py-1 text-xs font-medium text-slate-700 bg-white";
      span.textContent = text;
      return span;
    }

    function sectionCard({badge, title, html}) {
      const wrap = document.createElement("section");
      wrap.className = "bg-white/80 backdrop-blur rounded-2xl shadow-sm border border-slate-200 p-5 md:p-6 fade-in";
      wrap.innerHTML = `
        <div class="flex items-start gap-3 mb-3">
          <div class="h-9 w-9 shrink-0 rounded-xl bg-slate-900 text-white flex items-center justify-center text-sm font-semibold">${badge}</div>
          <h3 class="text-xl md:text-2xl font-semibold text-slate-800 leading-tight">${title}</h3>
        </div>
        <div class="prose prose-slate max-w-none text-sm md:text-base">${html}</div>
      `;
      return wrap;
    }

    function buildEngine(input) {
      const { topic, audience, goal, platform, tone } = input;
      const p = platformSpecs[platform] || platformSpecs.shorts;
      const switchEvery = p.switchSec;

      const compMax = {
        speak: [
          `Trong video h√¥m nay, ch√∫ng ta s·∫Ω n√≥i v·ªÅ: ${topic}`,
          `M·ª•c ti√™u: ${goal || "gi√∫p kh√°n gi·∫£ √°p d·ª•ng ƒë∆∞·ª£c ngay"}`
        ].map(sentence),
        visuals: [
          `Khung m·ªü: text ƒë·ªông tr√™n m√†n h√¨nh hi·ªÉn th·ªã ch·ªß ƒë·ªÅ "${topic}"`,
          "Cut-in: v√≠ d·ª• th·ª±c t·∫ø 3‚Äì5 gi√¢y minh h·ªça v·∫•n ƒë·ªÅ",
          "Overlay t·ª´ kh√≥a ch√≠nh b√°m theo l·ªùi n√≥i (2‚Äì4 t·ª´/slide)"
        ]
      };

      const hawkeye = {
        openContext: sentence(`V·∫•n ƒë·ªÅ l·ªõn c·ªßa ${audience}: v√¨ sao ${topic.toLowerCase()} l·∫°i quan tr·ªçng?`),
        deepen: [
          "Ph·∫ßn 1 ‚Äì B·ªëi c·∫£nh r·ªông: d·ªØ li·ªáu/quan s√°t ph·ªï qu√°t",
          "Ph·∫ßn 2 ‚Äì Nguy√™n l√Ω/l√Ω thuy·∫øt c·ªët l√µi",
          "Ph·∫ßn 3 ‚Äì V√≠ d·ª• c·ª• th·ªÉ v√† c√°ch l√†m t·ª´ng b∆∞·ªõc"
        ].map(sentence)
      };

      const metaphors = [
        `${topic} gi·ªëng nh∆∞ m·ªôt ‚Äúgia s∆∞ v√¥ h√¨nh‚Äù lu√¥n tr·ª±c 24/7`,
        "D√≤ng ch·∫£y c√¢u chuy·ªán nh∆∞ th·ªßy tri·ªÅu: l√™n ‚Äì cƒÉng ‚Äì x·∫£ ‚Äì l·∫Øng",
        "B·∫£n ƒë·ªì tr∆∞·ªõc ‚Äì ƒë∆∞·ªùng ƒëi sau: c√≥ map r·ªìi m·ªõi l√°i xe"
      ];

      const commonGround = {
        opener: sentence("T√¥i t·ª´ng ·ªü v·ªã tr√≠ c·ªßa b·∫°n: hoang mang, s·ª£ con nghi·ªán m√†n h√¨nh, v√† kh√¥ng bi·∫øt b·∫Øt ƒë·∫ßu t·ª´ ƒë√¢u."),
        we: sentence("Nh∆∞ng khi ch√∫ng ta th·ª≠ m·ªôt c√°ch ti·∫øp c·∫≠n m·ªõi, m·ªçi th·ª© b·∫Øt ƒë·∫ßu thay ƒë·ªïi."),
        ref: sentence("Nh·ªØng v√≠ d·ª• ƒë·ªùi th·ª±c ngay sau ƒë√¢y s·∫Ω gi√∫p ch√∫ng ta th·∫•y r√µ.")
      };

      const simplify = [
        "Chia nh·ªè kh√°i ni·ªám th√†nh 3 √Ω c·ªët l√µi, m·ªói √Ω ‚â§ 1 c√¢u ng·∫Øn",
        "Tr√°nh thu·∫≠t ng·ªØ ‚Äì n·∫øu bu·ªôc d√πng, lu√¥n k√®m v√≠ d·ª•",
        "D√πng c√¢u ch·ªß ƒë·ªông, ƒë·ªông t·ª´ m·∫°nh, s·ªë li·ªáu tr√≤n d·ªÖ nh·ªõ"
      ];

      const visualStun = {
        cadence: sentence(`ƒê·ªïi khung h√¨nh m·ªói ${switchEvery} gi√¢y (c·∫≠n/medium/to√†n, text, b-roll, m√†n h√¨nh demo).`),
        edits: [
          "Nh·∫£y c·∫Øt theo √Ω (jump cut) ƒë·ªÉ nh·∫•n nh·ªãp t∆∞ duy",
          "Slow Zoom 5‚Äì8% tr√™n ƒëo·∫°n gi·∫£i th√≠ch quan tr·ªçng",
          "Insert b-roll minh h·ªça v√≠ d·ª• tr∆∞·ªõc ‚Äì sau"
        ]
      };

      const valueCompression = {
        first10s: [
          "N√≥i l·ª£i √≠ch l·ªõn nh·∫•t ngay 5‚Äì10 gi√¢y ƒë·∫ßu",
          "Hi·ªÉn th·ªã k·∫øt qu·∫£/cu·ªëi ƒë∆∞·ªùng tr∆∞·ªõc, h√†nh tr√¨nh sau"
        ].map(sentence),
        sample: sentence(`‚ÄúCh·ªâ m·ªôt thay ƒë·ªïi nh·ªè h√¥m nay, ${audience.toLowerCase()} s·∫Ω th·∫•y k·∫øt qu·∫£ ngay tu·∫ßn n√†y.‚Äù`)
      };

      const proofAssets = (input.proofAssets || "")
        .split(/,\s*/g)
        .filter(Boolean)
        .length ? input.proofAssets.split(/,\s*/g).filter(Boolean)
                : ["·∫¢nh tr∆∞·ªõc/sau", "Feedback kh√°ch h√†ng", "Clip th·ª±c h√†nh", "S·ªë li·ªáu ti·∫øn b·ªô"];

      const proof = {
        copy: sentence("ƒê∆∞a b·∫±ng ch·ª©ng th·∫≠t ƒë·ªÉ t·∫Øt ‚Äòm√°y d√≤ BS‚Äô: ·∫£nh, video, s·ªë li·ªáu, h√≥a ƒë∆°n, case study."),
        assets: proofAssets
      };

      const contrast = {
        template: sentence("K·ª≥ v·ªçng ‚Üí B·∫ª ngo·∫∑t ‚Üí Gi·∫£i th√≠ch t·∫°i sao ‚Üí L·ª£i √≠ch b·∫•t ng·ªù"),
        hooks: [
          "T√¥i ƒë√£ sai su·ªët 3 nƒÉm‚Ä¶",
          "C√°ch ph·ªï bi·∫øn nh·∫•t th·ª±c ra l·∫°i k√©m hi·ªáu qu·∫£ nh·∫•t",
          "ƒêi·ªÅu kh√¥ng ai n√≥i cho b·∫°n bi·∫øt‚Ä¶"
        ]
      };

      const outline = [
        { part: "Hook (0‚Äì10s)", content: [valueCompression.sample, contrast.hooks[1], compMax.speak[0]] },
        { part: "B·ªëi c·∫£nh (10‚Äì30s)", content: [hawkeye.openContext, commonGround.opener] },
        { part: "Nguy√™n l√Ω (30‚Äì60s)", content: [metaphors[0], simplify[0]] },
        { part: "C√°ch l√†m (1‚Äì3p)", content: ["B∆∞·ªõc 1: ‚Ä¶", "B∆∞·ªõc 2: ‚Ä¶", "B∆∞·ªõc 3: ‚Ä¶"] },
        { part: "B·∫±ng ch·ª©ng (ƒëan xen)", content: proof.assets },
        { part: "K·∫øt th√∫c/CTA", content: ["B·∫°n s·∫Ω th·ª≠ ƒëi·ªÅu g√¨ ngay h√¥m nay?", "Comment t·ª´ kh√≥a ƒë·ªÉ nh·∫≠n template mi·ªÖn ph√≠."] }
      ];

      const thumb = [
        "Ti√™u ƒë·ªÅ 3‚Äì5 t·ª´ m·∫°nh: ‚ÄòAI L√Ä GIA S∆Ø?‚Äô",
        "·∫¢nh ch√≠nh: g∆∞∆°ng m·∫∑t c·∫£m x√∫c + v·∫≠t th·ªÉ ·∫©n d·ª• (ƒë√®n b√†n, s√°ch m·ªü)",
        "Ch·ªØ b·ªï tr·ª£ 2‚Äì3 t·ª´: ‚ÄòNhanh G·∫•p 3‚Äô"
      ];

      const broll = [
        "B√© h·ªçc c√πng laptop/ChatGPT",
        "Close-up tay g√µ b√†n ph√≠m",
        "Bi·ªÉu ƒë·ªì tr∆∞·ªõc/sau",
        "Gi·∫•y khen/ƒëi·ªÉm s·ªë"
      ];

      return { compMax, hawkeye, metaphors, commonGround, simplify, visualStun, valueCompression, proof, contrast, outline, thumb, broll, switchEvery, p, tone, topic, audience, goal };
    }

    function ul(items, icon) {
      const li = (t) => `<li>${icon ? icon + " " : ""}${t}</li>`;
      return `<ul>${items.map(li).join("")}</ul>`;
    }

    function renderAll(engine) {
      const out = $("results");
      out.innerHTML = "";

      // Chips row
      const chips = $("chips");
      chips.innerHTML = "";
      chips.appendChild(makeChip("Ch·ªß ƒë·ªÅ: " + engine.topic));
      chips.appendChild(makeChip("ƒê·ªëi t∆∞·ª£ng: " + engine.audience));
      chips.appendChild(makeChip("M·ª•c ti√™u: " + engine.goal));
      chips.appendChild(makeChip("N·ªÅn t·∫£ng: " + engine.p.label));
      chips.appendChild(makeChip("T√¥ng gi·ªçng: " + engine.tone));
      chips.appendChild(makeChip("ƒê·ªïi khung h√¨nh m·ªói " + engine.switchEvery + "s"));

      // Sections
      out.appendChild(sectionCard({
        badge: "1",
        title: "Comprehension Maxing ‚Äì Gh√©p l·ªùi n√≥i v·ªõi h√¨nh ·∫£nh",
        html: `
          <p class="font-medium">L·ªùi tho·∫°i g·ª£i √Ω:</p>
          ${ul(engine.compMax.speak.map(s => "üó£Ô∏è " + s))}
          <div class="h-px bg-slate-200 my-4"></div>
          <p class="font-medium">H√¨nh ·∫£nh g·ª£i √Ω:</p>
          ${ul(engine.compMax.visuals.map(v => "üéûÔ∏è " + v))}
        `
      }));

      out.appendChild(sectionCard({
        badge: "2",
        title: "Hawkeye Narrative ‚Äì T·ª´ t·ªïng th·ªÉ ƒë·∫øn chi ti·∫øt",
        html: `
          <p>${engine.hawkeye.openContext}</p>
          <div class="mt-3">${ul(engine.hawkeye.deepen)}</div>
        `
      }));

      out.appendChild(sectionCard({
        badge: "3",
        title: "Visual Examples & Metaphors ‚Äì ·∫®n d·ª• tr·ª±c quan",
        html: ul(engine.metaphors.map(m => "üí° " + m))
      }));

      out.appendChild(sectionCard({
        badge: "4",
        title: "Common Ground ‚Äì ƒêi·ªÉm chung v·ªõi kh√°n gi·∫£",
        html: `
          <p>${engine.commonGround.opener}</p>
          <p>${engine.commonGround.we}</p>
          <p>${engine.commonGround.ref}</p>
        `
      }));

      out.appendChild(sectionCard({
        badge: "5",
        title: "Simpler Words & Ideas ‚Äì Ng·∫Øn g·ªçn v√† d·ªÖ hi·ªÉu",
        html: ul(engine.simplify.map(s => "‚úèÔ∏è " + s))
      }));

      out.appendChild(sectionCard({
        badge: "6",
        title: "Visual Stun Gun ‚Äì Nh·ªãp h√¨nh gi·ªØ ch√∫ √Ω",
        html: `
          <p>${engine.visualStun.cadence}</p>
          <div class="mt-2">${ul(engine.visualStun.edits.map(e => "üé¨ " + e))}</div>
        `
      }));

      out.appendChild(sectionCard({
        badge: "7",
        title: "Value Compression ‚Äì N√©n gi√° tr·ªã l√™n ƒë·∫ßu",
        html: `
          <p class="font-medium">Trong 10 gi√¢y ƒë·∫ßu:</p>
          ${ul(engine.valueCompression.first10s.map(v => "‚ö° " + v))}
          <p class="mt-2">C√¢u m·∫´u: <span class="font-semibold">${engine.valueCompression.sample}</span></p>
        `
      }));

      out.appendChild(sectionCard({
        badge: "8",
        title: "Come With Proof ‚Äì ƒê∆∞a b·∫±ng ch·ª©ng th·∫≠t",
        html: `
          <p>${engine.proof.copy}</p>
          <div class="mt-2">${ul(engine.proof.assets.map(a => "üìé " + a))}</div>
        `
      }));

      out.appendChild(sectionCard({
        badge: "9",
        title: "Set Up Contrast ‚Äì T·∫°o t∆∞∆°ng ph·∫£n & b·∫•t ng·ªù",
        html: `
          <p>M·∫´u c·∫•u tr√∫c: ${engine.contrast.template}</p>
          <div class="flex flex-wrap gap-2 mt-3">
            ${engine.contrast.hooks.map(h => `<span class="px-2 py-1 rounded-full bg-slate-100 text-slate-700 text-xs border border-slate-200">${h}</span>`).join("")}
          </div>
        `
      }));

      // Outline
      const rows = engine.outline.map(row => `
        <tr class="odd:bg-white even:bg-slate-50">
          <td class="align-top p-3 border-b w-48 font-medium">${row.part}</td>
          <td class="align-top p-3 border-b">
            ${ul(row.content)}
          </td>
        </tr>
      `).join("");

      out.appendChild(sectionCard({
        badge: "üìú",
        title: "T√≥m t·∫Øt k·ªãch b·∫£n ƒë·ªÅ xu·∫•t",
        html: `
          <div class="overflow-x-auto">
            <table class="w-full text-sm border border-slate-200 rounded-xl overflow-hidden">
              <thead class="bg-slate-50">
                <tr>
                  <th class="text-left p-3 border-b">Ph·∫ßn</th>
                  <th class="text-left p-3 border-b">N·ªôi dung</th>
                </tr>
              </thead>
              <tbody>${rows}</tbody>
            </table>
          </div>
        `
      }));

      // Thumb & B-roll
      out.appendChild(sectionCard({
        badge: "üñºÔ∏è",
        title: "G·ª£i √Ω Thumbnail",
        html: ul(engine.thumb)
      }));
      out.appendChild(sectionCard({
        badge: "üéûÔ∏è",
        title: "Danh s√°ch B-roll ƒë·ªÅ xu·∫•t",
        html: ul(engine.broll)
      }));

      // Openers by tone
      out.appendChild(sectionCard({
        badge: "üéôÔ∏è",
        title: "G·ª£i √Ω l·ªùi tho·∫°i m·ªü ƒë·∫ßu (theo t√¥ng gi·ªçng)",
        html: `
          <p class="mb-2 text-sm text-slate-600">T√¥ng: <span class="font-semibold">${engine.tone}</span></p>
          ${ul([
            `<b>Hook t∆∞∆°ng ph·∫£n:</b> "T√¥i t·ª´ng nghƒ© ${engine.topic.toLowerCase()} l√† √Ω t∆∞·ªüng t·ªá ‚Äî cho ƒë·∫øn khi th·∫•y k·∫øt qu·∫£."`,
            `<b>Gi√° tr·ªã t·ª©c th√¨:</b> "Trong 60 gi√¢y, b·∫°n s·∫Ω c√≥ 3 b∆∞·ªõc ƒë·ªÉ ${engine.goal}."`,
            `<b>B·∫±ng ch·ª©ng l·ªìng gh√©p:</b> "ƒê√¢y l√† minh ch·ª©ng th·∫≠t t·ª´ ${engine.audience.toLowerCase()} tu·∫ßn tr∆∞·ªõc."`
          ])}
        `
      }));
    }

    // --- Initial values & events ---
    const defaults = {
      topic: "AI gi√∫p h·ªçc sinh ti·ªÉu h·ªçc h·ªçc To√°n nhanh h∆°n",
      audience: "Ph·ª• huynh c√≥ con c·∫•p 1",
      goal: "gi√∫p kh√°n gi·∫£ √°p d·ª•ng ƒë∆∞·ª£c ngay",
      platform: "shorts",
      tone: "Truy·ªÅn c·∫£m h·ª©ng",
      proofAssets: "·∫¢nh tr∆∞·ªõc/sau, Feedback kh√°ch h√†ng, Bi·ªÉu ƒë·ªì k·∫øt qu·∫£"
    };

    function setDefaults() {
      $("topic").value = defaults.topic;
      $("audience").value = defaults.audience;
      $("goal").value = defaults.goal;
      $("platform").value = defaults.platform;
      $("tone").value = defaults.tone;
      $("proofAssets").value = defaults.proofAssets;
    }

    async function copyJson() {
      const input = readInput();
      const data = buildEngine(input);
      const payload = { input, data };
      await navigator.clipboard.writeText(JSON.stringify(payload, null, 2));
      alert("ƒê√£ sao ch√©p c·∫•u h√¨nh + g·ª£i √Ω ra clipboard!");
    }

    function readInput() {
      return {
        topic: $("topic").value.trim() || defaults.topic,
        audience: $("audience").value,
        goal: $("goal").value.trim() || defaults.goal,
        platform: $("platform").value,
        tone: $("tone").value,
        proofAssets: $("proofAssets").value.trim()
      };
    }

    $("generateBtn").addEventListener("click", () => {
      const engine = buildEngine(readInput());
      renderAll(engine);
      window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
    });

    $("resetBtn").addEventListener("click", () => {
      setDefaults();
      $("results").innerHTML = "";
      $("chips").innerHTML = "";
    });

    $("copyJsonBtn").addEventListener("click", copyJson);

    // Boot
    setDefaults();
  </script>
</body>
</html>
